{"version":3,"sources":["components/Users/Users.module.css","../node_modules/reselect/es/index.js","redux/usersSelectors.js","components/Users/User.jsx","components/Users/Users.jsx","components/Users/UsersPagination.jsx","components/Users/UsersContainer.jsx"],"names":["module","exports","defaultEqualityCheck","a","b","areArgumentsShallowlyEqual","equalityCheck","prev","next","length","i","getDependencies","funcs","dependencies","Array","isArray","every","dep","dependencyTypes","map","join","Error","createSelector","memoize","_len","arguments","memoizeOptions","_key","_len2","_key2","recomputations","resultFunc","pop","memoizedResultFunc","apply","undefined","concat","selector","params","push","resetRecomputations","createSelectorCreator","func","lastArgs","lastResult","getUsers","state","usersPage","users","filter","u","getPageSize","pageSize","getTotalUsersCount","totalUsersCount","getCurrentPage","currentPage","getFollowingInProgress","followingInProgress","User","user","follow","unfollow","className","s","userCard","src","photos","small","alt","userAva100","to","id","navLink","name","textOverflow","status","followButtons","followed","disabled","some","unfollowButton","onClick","followButton","Users","props","wrapper","UsersPagination","pagesCount","Math","ceil","pages","startPosition","pageButtonsWrapper","pageButton","onPageChange","slice","p","selectedPage","UsersContainer","pageNumber","requestUsers","this","React","Component","connect","setCurrentPage"],"mappings":"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","file":"static/js/7.f8b224e0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Users_wrapper__2I8zw\",\"userCard\":\"Users_userCard__2glLp\",\"navLink\":\"Users_navLink__6cS4D\",\"userAva100\":\"Users_userAva100__qrNbR\",\"followButton\":\"Users_followButton__GF5Lt\",\"unfollowButton\":\"Users_unfollowButton__15VJ7\",\"textOverflow\":\"Users_textOverflow__1Dp5Q\",\"pageButtonsWrapper\":\"Users_pageButtonsWrapper__2XUgh\",\"pageButton\":\"Users_pageButton__-44Dx\",\"selectedPage\":\"Users_selectedPage__3vUuP\"};","function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n  var length = prev.length;\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n\n  var lastArgs = null;\n  var lastResult = null;\n  // we reference arguments instead of spreading them for performance reasons\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++;\n      // apply arguments instead of spreading for performance.\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions));\n\n    // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      }\n\n      // apply arguments instead of spreading for performance.\n      return memoizedResultFunc.apply(null, params);\n    });\n\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n    selector.recomputations = function () {\n      return recomputations;\n    };\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n    return selector;\n  };\n}\n\nexport var createSelector = createSelectorCreator(defaultMemoize);\n\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","import { createSelector } from \"reselect\";\r\n\r\nconst getUsersSelector = (state) => {\r\n    return state.usersPage.users;\r\n}\r\nexport const getUsers = createSelector(getUsersSelector, (users) => {\r\n    return users.filter(u => true);\r\n})\r\n\r\nexport const getPageSize = (state) => {\r\n    return state.usersPage.pageSize\r\n}\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage\r\n}\r\nexport const getFollowingInProgress = (state) => {\r\n    return state.usersPage.followingInProgress\r\n}","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './Users.module.css';\r\n\r\nlet User = ({user, followingInProgress, follow, unfollow}) => {\r\n    return <div key={user.id} className={s.userCard}>\r\n        <img src={user.photos.small != null ? user.photos.small : \"avatar_placeholder.png\"} alt=\"User avatar\" className={s.userAva100} />\r\n        <NavLink to={'/profile/' + user.id} className={s.navLink}>{user.name}</NavLink>\r\n        <div className={s.textOverflow}>{user.status}</div>\r\n        <div className={s.followButtons}>\r\n            {user.followed\r\n                ? <button\r\n                    disabled={followingInProgress.some(id => id === user.id)}\r\n                    className={s.unfollowButton}\r\n                    onClick={() => { unfollow(user.id) }}>Отписаться</button>\r\n                : <button\r\n                    disabled={followingInProgress.some(id => id === user.id)}\r\n                    className={s.followButton}\r\n                    onClick={() => { follow(user.id) }}>Подписаться</button>\r\n            }\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default User;","import React from 'react';\r\nimport User from './User';\r\nimport s from './Users.module.css';\r\n\r\nlet Users = (props) => {\r\n    return <div>\r\n        <div className={s.wrapper}>\r\n            {props.users.map(u =>\r\n                <User\r\n                    key={u.id}\r\n                    user={u}\r\n                    followingInProgress={props.followingInProgress}\r\n                    follow={props.follow}\r\n                    unfollow={props.unfollow}\r\n                />\r\n            )}\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Users;","import React from 'react';\r\nimport s from './Users.module.css';\r\n\r\nlet UsersPagination = (props) => {\r\n    let pagesCount = Math.ceil(props.totalUsersCount / props.pageSize);\r\n    let pages = [];\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i);\r\n    }\r\n    let startPosition = 0;\r\n    if (props.currentPage > 5) {\r\n        startPosition = props.currentPage - 6\r\n    }\r\n    return <div className={s.pageButtonsWrapper}>\r\n        <span\r\n            className={s.pageButton}\r\n            onClick={() => { if (props.currentPage > 1) { props.onPageChange(props.currentPage - 1) } }}>{'<'}\r\n        </span>\r\n        {pages.slice(startPosition, props.currentPage + 5).map(p => {\r\n            return <div className={s.pageButton} key={p}>\r\n                <div\r\n                    className={props.currentPage === p ? `${s.pageButton} ${s.selectedPage}` : undefined}\r\n                    onClick={() => { props.onPageChange(p) }}>\r\n                    {p}\r\n                </div>\r\n            </div>\r\n        })}\r\n        <span\r\n            className={s.pageButton}\r\n            onClick={() => { if (props.currentPage < pagesCount) { props.onPageChange(props.currentPage + 1) } }}>{'>'}\r\n        </span>\r\n    </div>\r\n}\r\n\r\nexport default UsersPagination;","import { connect } from 'react-redux';\r\nimport { requestUsers, follow, setCurrentPage, unfollow } from '../../redux/usersReducer';\r\nimport { getPageSize, getUsers, getTotalUsersCount, getCurrentPage, getFollowingInProgress } from '../../redux/usersSelectors';\r\nimport React from 'react';\r\nimport Users from './Users';\r\nimport UsersPagination from './UsersPagination';\r\n\r\nclass UsersContainer extends React.Component {\r\n    componentDidMount() {\r\n        this.props.requestUsers(this.props.currentPage, this.props.pageSize);\r\n    }\r\n    onPageChange = (pageNumber) => {\r\n        this.props.requestUsers(pageNumber, this.props.pageSize);\r\n    }\r\n    render() {\r\n        return <>\r\n            <UsersPagination\r\n                totalUsersCount={this.props.totalUsersCount}\r\n                pageSize={this.props.pageSize}\r\n                currentPage={this.props.currentPage}\r\n                onPageChange={this.onPageChange} />\r\n            <Users\r\n                users={this.props.users}\r\n                follow={this.props.follow}\r\n                unfollow={this.props.unfollow}\r\n                followingInProgress={this.props.followingInProgress} />\r\n        </>\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        followingInProgress: getFollowingInProgress(state)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { follow, unfollow, setCurrentPage, requestUsers })(UsersContainer)"],"sourceRoot":""}