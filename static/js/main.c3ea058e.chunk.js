(this["webpackJsonpreact-1"]=this["webpackJsonpreact-1"]||[]).push([[1],{137:function(e,t,n){},138:function(e,t,n){},227:function(e,t,n){"use strict";n.r(t);var r=function(e){e&&e instanceof Function&&n.e(8).then(n.bind(null,305)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},a=n(0),c=n.n(a),s=n(45),u=n.n(s),i=(n(137),n(34)),o=n(35),l=n(37),d=n(36),f=(n(138),n(38)),p=n(3),j=n(23),b=n(26),h=n(19),O=n(8),v=n.n(O),g=n(2),m=function(e){return Object(g.jsx)("header",{className:v.a.header,children:Object(g.jsx)("div",{children:e.isAuth?Object(g.jsxs)("div",{children:[Object(g.jsxs)("nav",{className:v.a.nav,children:[Object(g.jsx)("div",{className:v.a.item,children:Object(g.jsx)(h.b,{to:"/dialogs",className:v.a.navlink,activeClassName:v.a.active,children:"\u0414\u0438\u0430\u043b\u043e\u0433\u0438"})}),Object(g.jsx)("div",{className:v.a.item,children:Object(g.jsx)(h.b,{to:"/users",className:v.a.navlink,activeClassName:v.a.active,children:"\u041f\u043e\u0438\u0441\u043a \u043b\u044e\u0434\u0435\u0439"})})]}),Object(g.jsxs)("div",{className:v.a.loginWrapper,children:[Object(g.jsx)("div",{className:v.a.item,children:Object(g.jsx)(h.b,{to:"/profile/".concat(e.myId),className:v.a.navlink,activeClassName:v.a.active,children:e.myLogin})}),Object(g.jsx)("div",{className:v.a.item,children:Object(g.jsx)(h.b,{to:"/login",className:v.a.navlink,onClick:e.logout,children:"\u0412\u044b\u0445\u043e\u0434"})})]})]}):Object(g.jsx)("div",{className:v.a.loginWrapper,children:Object(g.jsx)("div",{className:v.a.item,children:Object(g.jsx)(h.b,{to:"/login",className:v.a.navlink,activeClassName:v.a.active,children:"\u0412\u0445\u043e\u0434"})})})})})},x=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(m,Object(p.a)({},this.props))})}}]),n}(c.a.Component),w=Object(j.b)((function(e){return{isAuth:e.auth.isAuth,myId:e.auth.id,myLogin:e.auth.login,myEmail:e.auth.email}}),{logout:b.e})(x),y=n(83),_=n.n(y),C=function(){return Object(g.jsx)("footer",{className:_.a.footer,children:"Copyright (c) Ivan Suprovich, 2021"})},P=n(6),S="INIT_SUCCESS",N={initialized:!1},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(p.a)(Object(p.a)({},e),{},{initialized:!0});default:return e}},k=n(22),E=function(e){return function(t){return Object(g.jsx)(c.a.Suspense,{fallback:Object(g.jsx)(f.a,{}),children:Object(g.jsx)(e,Object(p.a)({},t))})}},I=c.a.lazy((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,309))})),U=c.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,306))})),A=c.a.lazy((function(){return n.e(7).then(n.bind(null,307))})),L=c.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,308))})),F=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.initApp()}},{key:"render",value:function(){return this.props.initialized?Object(g.jsxs)("div",{className:"app-wrapper",children:[Object(g.jsx)(w,{}),Object(g.jsxs)("div",{className:"app-wrapper-content",children:[Object(g.jsx)(P.b,{path:"/login",render:E(I)}),Object(g.jsx)(P.b,{path:"/profile/:userid?",render:E(U)}),Object(g.jsx)(P.b,{path:"/dialogs",render:E(L)}),Object(g.jsx)(P.b,{path:"/users",render:E(A)})]}),Object(g.jsx)(C,{})]}):Object(g.jsx)(f.a,{})}}]),n}(c.a.Component),R=Object(k.d)(P.f,Object(j.b)((function(e){return{initialized:e.app.initialized}}),{initApp:function(){return function(e){var t=e(Object(b.b)());Promise.all([t]).then((function(){e({type:S})}))}}}))(F),M=n(58),G=n(73),z=n(80),D=n(33),H=n(84),W=n(79),X=Object(k.c)({app:T,profilePage:M.b,dialogsPage:G.a,usersPage:z.a,fetchAnim:D.a,auth:b.a,form:W.a}),B=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||k.d,J=Object(k.e)(X,B(Object(k.a)(H.a)));u.a.render(Object(g.jsx)(h.a,{children:Object(g.jsx)(j.a,{store:J,children:Object(g.jsx)(R,{})})}),document.getElementById("root")),r(),window.store=J},26:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return v})),n.d(t,"c",(function(){return g}));var r=n(7),a=n.n(r),c=n(11),s=n(3),u=n(47),i=n(9),o="my-app/auth/SET_USER_DATA",l="my-app/auth/SET_CAPTCHA_URL",d="my-app/auth/TOGGLE_CAPTCHA",f={id:null,email:null,login:null,isAuth:!1,captchaUrl:null,needCaptcha:!1},p=function(e,t,n,r){return{type:o,payload:{id:e,email:t,login:n,isAuth:r}}},j=function(e){return{type:d,needCaptcha:e}},b=function(e){return{type:l,captchaUrl:e}},h=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.me();case 2:0===(n=e.sent).data.resultCode&&(r=n.data.data,c=r.id,s=r.email,u=r.login,t(p(c,s,u,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(e,t,n,r){return function(){var s=Object(c.a)(a.a.mark((function c(s){var o,l,d;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s(j(!1)),a.next=3,i.a.login(e,t,n,r);case 3:if(0!==(o=a.sent).data.resultCode){a.next=8;break}s(h()),a.next=18;break;case 8:if(10!==o.data.resultCode){a.next=16;break}return a.next=11,i.a.captcha();case 11:l=a.sent,s(j(!0)),s(b(l.data.url)),a.next=18;break;case 16:d=o.data.messages.length>0?o.data.messages[0]:"\u041e\u0428\u0418\u0411\u041a\u0410",s(Object(u.a)("login",{_error:d}));case 18:case"end":return a.stop()}}),c)})));return function(e){return s.apply(this,arguments)}}()},v=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.logout();case 2:0===e.sent.data.resultCode&&t(p(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.captcha();case 2:n=e.sent,console.log(n.data.url),t(b(n.data.url));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return Object(s.a)(Object(s.a)({},e),t.payload);case d:return Object(s.a)(Object(s.a)({},e),{},{needCaptcha:t.needCaptcha});case l:return Object(s.a)(Object(s.a)({},e),{},{captchaUrl:t.captchaUrl});default:return e}}},33:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var r=n(3),a="TOGGLE_IS_FETCHING",c={isFetching:!0},s=function(e){return{type:a,isFetching:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return Object(r.a)(Object(r.a)({},e),{},{isFetching:t.isFetching});default:return e}}},38:function(e,t,n){"use strict";var r=n(46),a=n.n(r),c=n(2);t.a=function(e){return Object(c.jsxs)("div",{className:a.a.rollerWrapper,children:[Object(c.jsxs)("div",{className:a.a.ldsRoller,children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]}),Object(c.jsx)("div",{className:a.a.loadText,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"})]})}},46:function(e,t,n){e.exports={rollerWrapper:"preloader_rollerWrapper__yM2eP",loadText:"preloader_loadText__y083k",ldsRoller:"preloader_ldsRoller__3L2F4"}},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return v}));var r=n(7),a=n.n(r),c=n(11),s=n(27),u=n(3),i=n(33),o=n(9),l="ADD-POST",d="SET_PROFILE",f="SET_STATUS",p={profile:null,status:"",posts:[{id:1,user:"Admin",message:"https://youtu.be/_X3dVadZp2U?t=406"}]},j=function(e){return{type:l,newPostText:e}},b=function(e){return{type:f,status:e}},h=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(i.b)(!0)),t.next=3,o.b.getProfile(e);case 3:r=t.sent,n(Object(i.b)(!1)),n((a=r.data,{type:d,profile:a}));case 6:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.b.getProfileStatus(e);case 2:r=t.sent,n(b(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(b(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(u.a)(Object(u.a)({},e),{},{posts:[{id:Math.floor(1e5*Math.random()),user:"testUser",message:t.newPostText}].concat(Object(s.a)(e.posts))});case d:return Object(u.a)(Object(u.a)({},e),{},{profile:t.profile});case f:return Object(u.a)(Object(u.a)({},e),{},{status:t.status});default:return e}}},73:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r=n(27),a=n(3),c="SEND-MESSAGE",s={dialogsData:[{id:1,name:"Alex"},{id:2,name:"Diana"},{id:3,name:"Putin"},{id:4,name:"Obama"}],messages:[{id:1,message:"https://youtu.be/MM02LsZqssQ?t=1056"}]},u=function(e){return{type:c,newMessageText:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[{id:Math.floor(1e3*Math.random()),message:t.newMessageText}])});default:return e}}},8:function(e,t,n){e.exports={header:"Header_header__1bC-0",nav:"Header_nav__nLvwt",item:"Header_item__KHImd",navlink:"Header_navlink__16w11",active:"Header_active__3P0Xw",loginWrapper:"Header_loginWrapper__2a5G8"}},80:function(e,t,n){"use strict";n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return x})),n.d(t,"b",(function(){return y})),n.d(t,"e",(function(){return _}));var r=n(7),a=n.n(r),c=n(11),s=n(27),u=n(3),i=n(9),o=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(u.a)(Object(u.a)({},e),r):e}))},l="FOLLOW",d="UNFOLLOW",f="SET_USERS",p="SET_CURRENT_PAGE",j="SET_TOTAL_USERS_COUNT",b="TOGGLE_IS_FOLLOWING_PROGRESS",h={users:[],pageSize:13,totalUsersCount:0,currentPage:1,followingInProgress:[]},O=function(e){return{type:l,userId:e}},v=function(e){return{type:d,userId:e}},g=function(e){return{type:p,currentPage:e}},m=function(e,t){return{type:b,followingInProgress:e,userId:t}},x=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(g(e)),n.next=3,i.c.getUsers(e,t);case 3:c=n.sent,r((s=c.items,{type:f,users:s})),r((a=c.totalCount,{type:j,totalUsersCount:a}));case 6:case"end":return n.stop()}var a,s}),n)})));return function(e){return n.apply(this,arguments)}}()},w=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(m(!0,n)),e.next=3,r(n);case 3:0===e.sent&&t(c(n)),t(m(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),y=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w(n,e,i.c.followUser.bind(i.c),O);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w(n,e,i.c.unfollowUser.bind(i.c),v);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(u.a)(Object(u.a)({},e),{},{users:o(e.users,t.userId,"id",{followed:!0})});case d:return Object(u.a)(Object(u.a)({},e),{},{users:o(e.users,t.userId,"id",{followed:!1})});case b:return Object(u.a)(Object(u.a)({},e),{},{followingInProgress:t.followingInProgress?[].concat(Object(s.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});case f:return Object(u.a)(Object(u.a)({},e),{},{users:t.users});case p:return Object(u.a)(Object(u.a)({},e),{},{currentPage:t.currentPage});case j:return Object(u.a)(Object(u.a)({},e),{},{totalUsersCount:t.totalUsersCount});default:return e}}},83:function(e,t,n){e.exports={footer:"Footer_footer__1cRdM"}},9:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n(82),a=r.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"45bf7595-daa3-4596-8932-c7910484d1d2"}}),c={getUsers:function(e,t){return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},followUser:function(e){return a.post("follow/".concat(e)).then((function(e){return e.data.resultCode}))},unfollowUser:function(e){return a.delete("follow/".concat(e)).then((function(e){return e.data.resultCode}))}},s={getProfile:function(e){return a.get("profile/".concat(e))},getProfileStatus:function(e){return a.get("profile/status/".concat(e))},updateStatus:function(e){return a.put("profile/status",{status:e})}},u={me:function(){return a.get("auth/me")},login:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return a.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},logout:function(){return a.delete("auth/login")},captcha:function(){return a.get("security/get-captcha-url")}}}},[[227,2,3]]]);
//# sourceMappingURL=main.c3ea058e.chunk.js.map